<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Find Albums on Spotify</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <form action="" class="search-bar" id="search">
            <input id="artistName" type="text" placeholder="Artist Name" name="artist">
            <button id="submitArtist" type="submit"><img src="search.png"></button>
        </form>
    </div>

    <h3>
        <script>
            var enterArtist = document.getElementById('search');
            enterArtist.addEventListener('submit', function (e) {
                e.preventDefault();
                fetch(`http://localhost:8000/albums?artist=${artistName.value}`)
                    .then(function (response) {
                        return response.json();
                    })
                    .then((result) => {
                        document.write(`<h1> ${result[0].artist} </h1>`);
                        document.write("<title>Find Albums on Spotify</title>");
                        var currentList = [];
                        var j = 0;
                        for (let i = 1; i < result.length; i++) {
                            if ((currentList.indexOf(result[i].name) == -1) && (result[i].type == 'album') && (result[i].group != 'appears_on')) {
                                currentList[j++] = result[i].name;
                                document.write(result[i].name.fontcolor('#1DB954') + " | ".bold() + result[i].year + " | ".bold() + `<a href=${result[i].url}>Album Art</a>`);
                                document.write("<br><br>");
                            }
                        }
                        if (currentList.length == 0) {
                            document.write("<h2> No albums to display </h2>")
                        }

                    })
                    .catch(function (error) {
                        document.write("<h2>Error - Input a Spotify Artist or Check Connection</h2>");
                        console.log(error);
                    })

            });

        </script>
    </h3>

</body>

</html>